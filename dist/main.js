!function(e){var t={};function __webpack_require__(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,__webpack_require__),s.l=!0,s.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)__webpack_require__.d(r,s,function(t){return e[t]}.bind(null,s));return r},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s="./src/index.js")}({"./src/index.js":function(e,t,r){"use strict";r.r(t);var s=class BaseClass{constructor(...e){const t=Object.keys(this.args);if(e.length<t.length)throw new Error(`The ${this.constructor.name} constructor must receive at least ${t.length} argument${t.length>1&&"s"}!!!`);const r=(e,t,r,s)=>{const i=s&&s.name?s.name.toLowerCase():"object";switch(typeof e){case"object":if(!(e instanceof s||e.constructor.name===s.name))throw new TypeError(`The argument ${r+1} ('${t}') must be '${s.name}' type!!!`);break;case"string":case"number":case"boolean":if(typeof e!==i)throw new TypeError(`The argument ${r+1} ('${t}') must be '${s&&s.name}' type!!!`)}};Object.assign(this,e.reduce((e,s,i)=>{const n=t[i];if(void 0!==n){const t=this.args[n];if("function"==typeof t&&r(s,n,i,t),Array.isArray(t)){let e=!1,a=null;if(t.forEach(t=>{try{r(s,n,i,t),e=!0}catch(o){a=o}}),!e)throw a}e[n]=s}else e[i]=s;return e},{}))}get args(){return{}}};var i=class Cell_Cell extends s{get args(){return{x:Number,y:Number}}constructor(...e){super(...e),this.letter=""}toString(){return`${this.x}:${this.y}`}};const n=({length:e,x:t,y:r,isVertical:s})=>Array.from({length:e}).map((e,i)=>s?`${t}:${r+i}`:`${t+i}:${r}`);var a=class Word_Word extends s{get args(){return{x:Number,y:Number,length:Number,isVertical:Boolean,index:Number}}constructor(...e){super(...e),this.clues=[],this.letters=new Map(this.cells.map((e,t)=>[e,"_"]))}get cells(){return n(this)}get word(){return[...this.letters.values()].join("")}};var o=class Grid_Grid extends s{get args(){return{width:Number,height:Number,blanks:Array,name:String}}constructor(e,t,r,s){super(e,t,r,s),this.cells=this.rebuildCells(),this.blanks=new Set(this.blanks),this.symmetry={horizontal:!0,vertical:!0,diagonal:!0}}addBlanks(...e){e.forEach(e=>{this.blanks.add(e)})}removeBlanks(...e){e.forEach(e=>{this.blanks.delete(e)})}toggleBlank(e){const[t,r]=e.split(":"),s=`${this.width-t+1}:${r}`,i=`${t}:${this.height-r+1}`,n=`${this.width-t+1}:${this.height-r+1}`;if(this.blanks.has(e))return this.blanks.delete(e),this.symmetry.vertical&&this.blanks.delete(s),this.symmetry.horizontal&&this.blanks.delete(i),void(this.symmetry.diagonal&&this.blanks.delete(n));this.blanks.add(e),this.symmetry.vertical&&this.blanks.add(s),this.symmetry.horizontal&&this.blanks.add(i),this.symmetry.diagonal&&this.blanks.add(n)}rebuildGrid({width:e,height:t}){this.blanks.clear(),this.width=e,this.height=t,this.cells=this.rebuildCells()}rebuildCells(){return new Map(Array.from({length:this.height},(e,t)=>t+1).flatMap(e=>Array.from({length:this.width},(t,r)=>[`${r+1}:${e}`,new i(r+1,e)])))}changeSize({width:e,height:t}){e&&this.width!==e&&(this.width=e),t&&this.height!==t&&(this.height=t)}generateGrid(e,t,r){let s,i;this.blanks.clear(),e&&t?(s=Math.round(this.width/2),i=Math.round(this.height/2)):(s=e?this.width:Math.round(this.width/2),i=t?this.height:Math.round(this.height/2));for(let n=1;n<=s;n+=1)for(let e=1;e<=i;e+=1)Math.random()>r||this.toggleBlank(`${n}:${e}`)}singleDirectionWords(e=!1){const t=[];let r=1;for(;r<=(e?this.width:this.height);r+=1){const s=[...this.blanks].filter(t=>Number(t.split(":")[e?0:1])===r).map(t=>Number(t.split(":")[e?1:0]));if(s.length>0){const i=Array.from({length:e?this.height:this.width}).map((e,t)=>t+1);i&&`:${i.join("::")}:`.split(new RegExp(`:${s.join(":|:")}:`)).filter(e=>{const t=e.match(/:\d+:/g);return!!t&&t.length>1}).forEach(s=>{const i=s.match(/:\d+:/g),n=i?i.length:0,a=Number(s.match(/^:(\d+)/)[1]);t.push([e?r:a,e?a:r,n,e])})}else t.push([e?r:1,e?1:r,e?this.height:this.width,e])}return t}words(){return this.addIndexes([...this.singleDirectionWords(!0),...this.singleDirectionWords(!1)]).map(e=>{const t=`${e[0]}:${e[1]}`,r=new a(...e);return r.letters.set(t,r.letters.get(t)),r})}addIndexes(e){return e.map(t=>{const{index:r}=this.startCells(e).find(({x:e,y:r})=>t[0]===e&&t[1]===r);return[...t,r]})}startCells(e){return[...new Set(e.map(([e,t])=>({x:e,y:t})))].sort((e,t)=>e.y===t.y?e.x-t.x:e.y-t.y).map((e,t)=>({...e,index:t+1}))}};const l={Cell:i,Grid:o,Word:a,Builder:class Builder_Builder extends s{get args(){return{Grid:Function,Word:Function,Crossword:Function}}constructor(){super(...arguments),this.crossword=null}createCrossword(e){this.crossword=new this.Crossword(e)}createGrid(...e){return new this.Grid(...e)}},Crossword:class Crossword_Crossword extends s{get args(){return{grid:o}}constructor(){super(...arguments),this.mode="grid"}get letters(){const e=Array.from(this.grid.cells.values(),e=>e+[]);return new Map(e.filter(e=>!this.grid.blanks.has(e)))}get horizontalWords(){return this.createWordsMap(this.grid.words().filter(({isVertical:e})=>!e))}get verticalWords(){return this.createWordsMap(this.grid.words().filter(({isVertical:e})=>e))}toggleMode(){this.mode="grid"===this.mode?"fill":"grid"}createWordsMap(e){return new Map(e.map(e=>[e.index,e]))}setLetter(e,t,r){void 0===r&&"string"==typeof e&&2===e.split(":").length&&"string"==typeof t&&(r=t,t=e.split(":")[1],e=e.split(":")[0]),this.grid.cells.get(`${e}:${t}`).letter=r,this.grid.words().filter(({cells:r})=>r.includes(`${e}:${t}`)).forEach(s=>s.letters.set(`${e}:${t}`,r))}}};window&&(window.X=l);t.default=l}});